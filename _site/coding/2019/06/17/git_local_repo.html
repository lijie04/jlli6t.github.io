<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link rel="stylesheet" href="/jlli6t.github.io/assets/css/normalize.css"/>
	<link rel="stylesheet" href="/jlli6t.github.io/assets/css/open-color.css"/>
	<link rel="stylesheet" href="/jlli6t.github.io/assets/css/tao/styles.css"/>

  <script async src="https://use.fontawesome.com/releases/v6.0.0/js/all.js"></script>

  

</head>

  <body>
    <div class="wrapper">
      <header class="masthead">
  <h2 class="masthead-title">
    <a href="/jlli6t.github.io/">Jie Li (She/Her/Hers)</a>
  </h2>
  
    <h5 class="masthead-tagline">PhD student interested in microbial ecology, bioinformatics and statistics</h5>
  
  
    <nav class="nav">
      
        <a class="nav-item " href="/jlli6t.github.io/about/">
          About
        </a>
      
        <a class="nav-item " href="/jlli6t.github.io/home/index.html">
          Blogs
        </a>
      
        <a class="nav-item " href="/jlli6t.github.io/projects/index.html">
          Projects
        </a>
      
        <a class="nav-item " href="/jlli6t.github.io/categories/index.html">
          Categories
        </a>
      
        <a class="nav-item " href="/jlli6t.github.io/years/index.html">
          Years
        </a>
      
        <a class="nav-item " href="/jlli6t.github.io/tags/index.html">
          Tags
        </a>
      
        <a class="nav-item " href="/jlli6t.github.io/cv/">
          CV
        </a>
      
      </nav>
  
</header>

      <main>
        <article class="post">
  <div class="post-meta post-meta-top">
    <div>
      <time datetime="2019-06-17T00:00:00+10:00">
        <i class="fa-solid fa-calendar-days"></i> 17 Jun 2019
      </time><i class="fa-solid fa-at"></i> 
        
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">Jie Li</span></div>
    
    
      <nav class="post-categories">
        
          
            <a class="post-category" href="/jlli6t.github.io/categories/#coding">coding</a> /
          
        
      </nav>
    
  </div>

  <h1 class="post-title">Learning git - local repo</h1>
  

  

  <div class="post-content">
    <h3 id="小编有言">小编有言：</h3>
<p>使用git的好处不多说，网上有非常多的博客讲解了其逻辑结构。最最主要的功能版本控制，真的是所有代码爱好者的福音了（嘻嘻）。
建议不熟悉git逻辑的同学宝宝先了解一下git的逻辑再阅读本文，会更顺畅哦，（一个梦幻拉丁式谢礼）。</p>

<h3 id="git工具">git工具</h3>
<p>查看服务器上是否已经安装好git， 服务器上有自带的git，直接使用即可，不需要自行安装了</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$which</span> git
/opt/rocks/bin/git</code></pre></figure>

<h3 id="初始化仓库">初始化仓库：</h3>
<p>进入到对应的目录，然后执行<code class="language-plaintext highlighter-rouge">git init</code>命令即可</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> init</code></pre></figure>

<h3 id="查看工作状态">查看工作状态：</h3>
<p>查看工作目录+stage+HEAD的状态，发现工作目录有一个rdetfq.py文件，但是没有被加入到stage，也没有commit到HEAD过。</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> status
On branch master

Initial commit

Untracked files:
  <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to include <span class="k">in </span>what will be committed<span class="o">)</span>

    rdetfq.py

nothing added to commit but untracked files present <span class="o">(</span>use <span class="s2">"git add"</span> to track<span class="o">)</span></code></pre></figure>

<h3 id="对目录下的文件进行stage">对目录下的文件进行stage：</h3>
<p>于是add rdetrfq.py add 到stage, 没有任何信息输出，Linux的核心，没有消息就是好消息之一</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> add rdetrfq.fy</code></pre></figure>

<h3 id="再次查看工作状态">再次查看工作状态：</h3>
<p>再次查看status, 发现提示rdetrfq.py已经被add到stage区，在等待被commit到HEAD</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> status
On branch master

Initial commit

Changes to be committed:
  <span class="o">(</span>use <span class="s2">"git rm --cached &lt;file&gt;..."</span> to unstage<span class="o">)</span>

      new file:   rdetrfq.py</code></pre></figure>

<h3 id="commit-stage的内容到head区">Commit stage的内容到HEAD区：</h3>
<p>将stage中的所有内容commit 到HEAD区， -m是注释信息，注明本次commit所做的信息</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> commit <span class="nt">-m</span> <span class="s2">"add code of randomly extracting fq"</span>
<span class="o">[</span>master <span class="o">(</span>root-commit<span class="o">)</span> e66bd9f] add code of randomly extracting fq
  1 file changed, 11 insertions<span class="o">(</span>+<span class="o">)</span>
  create mode 100644 rdetrfq.py</code></pre></figure>

<h3 id="再次查看工作区状态">再次查看工作区状态：</h3>
<p>再次查看工作区的状态，显示working tree clean, 工作区的东西在HEAD区中都有，版本一致</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> status
On branch master
nothing to commit, working tree clean</code></pre></figure>

<h3 id="useful-tips">Useful tips</h3>
<p>本地仓库操作相关的TIPS
<strong>TIPS0：</strong></p>

<p>如果已经commit 多个不同的版本到HEAD，想回到以前commit的版本，例如回退一个版本：</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> reset <span class="nt">--hard</span> HEAD~1
HEAD is now at e7b3364 add read_pars <span class="k">function</span></code></pre></figure>

<p><strong>TIPS1：</strong></p>

<p>如果你想撤销add到stage区的文件，使用git reset HEAD +文件，这里的单独的HEAD指的是当前版本
例如撤销stage区的test文件：(相当于撤销一次对stage区的操作)</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> reset HEAD <span class="nb">test
</span>Unstaged changes after reset:
M   <span class="nb">test</span></code></pre></figure>

<p><strong>TIPS2：</strong></p>

<p>如果在工作区中对test文件进行了修改，但是并不想保留修改，则使用git checkout撤销在工作区中对test文件进行的修改，相当于从HEAD中把当前版本的test copy出来，– 是指定在当前branch，如果不加–，在多branch的情况下会切换到其他的branch进行操作，而不是对test这个文件进行操作</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> checkout <span class="nt">--</span> <span class="nb">test</span></code></pre></figure>

<p><strong>TIPS3：</strong></p>

<p>如果你想从HEAD中删除某个文件: 则使用git rm file来对file进行删除， 然后需要git commit此次操作到HEAD</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> <span class="nb">rm </span>rdetrfq.py
<span class="nb">rm</span> <span class="s1">'rdetrfq.py'</span></code></pre></figure>

<p><strong>TIPS4：</strong></p>

<p>但是如果还没有进行commit到HEAD, 又想恢复文件的话，则需要先撤销一次对stage的操作， git reset HEAD file，这是把指针指回当前HEAD， 相当于忽略git rm file这一步操作</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> reset HEAD rdetrfq.py
Unstaged changes after reset:
D   rdetrfq.py</code></pre></figure>

<p><strong>TIPS5：</strong></p>

<p>通过TIPS4指针指回当前HEAD之后，再checkout 从HEAD区copy来对应的文件，可以看到对应的文件已经恢复到工作区</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$git</span> checkout <span class="nt">--</span> rdetrfq.py</code></pre></figure>

<p><strong>TIPS6：</strong></p>

<p>如果只是linux 命令rm误删了某个工作区的文件：则直接使用git checkout可从HEAD里召回当前版本的该文件</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$rm</span> rdetrfq.py <span class="c">## you accidentally removed file rdetrfq.py</span>
<span class="nv">$git</span> checkout rdetrfq.py <span class="c"># you recalled this file from HEAD</span></code></pre></figure>

<h3 id="参考">参考：</h3>
<p><a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%85%B3%E4%BA%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6">book-tutorial-for-git</a></p>

  </div>

  
    <nav class="post-meta post-meta-bottom">
      
        
        
          <a class="post-tag" href="/jlli6t.github.io/tags/#tutorials">#tutorials</a>
        
      
    </nav>
  
</article>

<div class="pagination">
  
    <a class="prev post-prev" href="/jlli6t.github.io/coding/python/2018/06/20/Configure_Python3_with_TCL-TK.html">
      <i class="fas fa-chevron-left"></i> <span class="">Configure Python3 with TCL-TK
</span>
    </a>
  
  
  
    <a class="next post-next" href="/jlli6t.github.io/metatranscriptomic/bioinformatics%20tools/2019/06/19/Introduction_of_sortmerna.html">
      <span class="">Introduction to SortMeRNA
</span> <i class="fas fa-chevron-right"></i> 
    </a>
  
</div>



      </main>
      <footer class="footer">
  
  <div class="social">
    
      <a href="mailto:jlli6t@gmail.com" target="_blank">
        <i class="fas fa-envelope" title="Email"></i>
      </a>
    
      <a href="https://scholar.google.com/citations?hl=zh-CN&user=s_Uga6sAAAAJ" target="_blank">
        <i class="fab fa-google" title="Google scholar"></i>
      </a>
    
      <a href="https://github.com/jlli6t" target="_blank">
        <i class="fab fa-github" title="Github"></i>
      </a>
    
      <a href="https://www.linkedin.com/in/jie-li-3201a57b/" target="_blank">
        <i class="fab fa-linkedin" title="linkedin"></i>
      </a>
    
      <a href="https://orcid.org/0000-0002-9623-9213" target="_blank">
        <i class="fa-brands fa-orcid" title="ORCID"></i>
      </a>
    
      <a href="https://twitter.com/jlli6t" target="_blank">
        <i class="fab fa-twitter" title="Twitter"></i>
      </a>
    
      <a href="https://jlli6t.github.io" target="_blank">
        <i class="fas fa-link" title="Website"></i>
      </a>
    
  </div>
  

  <div class="columns">
    <p class="column">
      &copy; <time datetime="2022-06-15T10:26:58+10:00">2022</time>&nbsp;<a href="https://scholar.google.com/citations?hl=zh-CN&user=s_Uga6sAAAAJ" target="_blank">Jie Li</a>. All rights reserved.
    </p>

    <p class="column">
      Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a> & <a href="https://github.com/vfvong" target="_blank">vfvong</a>
    </p>

    
    <p class="column">
      Passion is the only thing that can get you through the long years|唯有热爱，可抵岁月漫长
    </p>
    
  </div>
</footer>

    </div>

    

    
  </body>
</html>
